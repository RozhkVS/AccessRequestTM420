var JST_DEFAULT_DECIMAL_DIGITS=-1,JST_DEFAULT_DECIMAL_SEPARATOR=",",JST_DEFAULT_GROUP_SEPARATOR=".",JST_DEFAULT_USE_GROUPING=!1,JST_DEFAULT_CURRENCY_SYMBOL="R$",JST_DEFAULT_USE_CURRENCY=!1,JST_DEFAULT_NEGATIVE_PARENTHESIS=!1,JST_DEFAULT_GROUP_SIZE=3,JST_DEFAULT_SPACE_AFTER_CURRENCY=!0,JST_DEFAULT_CURRENCY_INSIDE=!1,JST_DEFAULT_DATE_MASK="dd/MM/yyyy",JST_DEFAULT_ENFORCE_LENGTH=!0,JST_DEFAULT_TRUE_VALUE="true",JST_DEFAULT_FALSE_VALUE="false",JST_DEFAULT_USE_BOOLEAN_VALUE=!0;function Parser(){this.parse=function(e){return e},this.format=function(e){return e},this.isValid=function(e){return isEmpty(e)||null!=this.parse(e)}}function NumberParser(e,t,r,s,i,a,n,l,u,h){this.base=Parser,this.base(),this.decimalDigits=null==e?JST_DEFAULT_DECIMAL_DIGITS:e,this.decimalSeparator=null==t?JST_DEFAULT_DECIMAL_SEPARATOR:t,this.groupSeparator=null==r?JST_DEFAULT_GROUP_SEPARATOR:r,this.useGrouping=null==s?JST_DEFAULT_USE_GROUPING:booleanValue(s),this.currencySymbol=null==i?JST_DEFAULT_CURRENCY_SYMBOL:i,this.useCurrency=null==a?JST_DEFAULT_USE_CURRENCY:booleanValue(a),this.negativeParenthesis=null==n?JST_DEFAULT_NEGATIVE_PARENTHESIS:booleanValue(n),this.groupSize=null==l?JST_DEFAULT_GROUP_SIZE:l,this.spaceAfterCurrency=null==u?JST_DEFAULT_SPACE_AFTER_CURRENCY:booleanValue(u),this.currencyInside=null==h?JST_DEFAULT_CURRENCY_INSIDE:booleanValue(h),this.parse=function(e){if(e=trim(e),isEmpty(e))return null;e=replaceAll(e,this.groupSeparator,""),e=replaceAll(e,this.decimalSeparator,".");var t=(e=replaceAll(e,this.currencySymbol,"")).indexOf("(")>=0||e.indexOf("-")>=0;if(e=replaceAll(e,"(",""),e=replaceAll(e,")",""),e=replaceAll(e,"-",""),e=trim(e),!onlySpecified(e,JST_CHARS_NUMBERS+"."))return null;var r=parseFloat(e);return r=t?-1*r:r,this.round(r)},this.format=function(e){if(isNaN(e)&&(e=this.parse(e)),isNaN(e))return null;var t=e<0;e=Math.abs(e);var r="",s=String(this.round(e)).split("."),i=s[0],a=s.length>1?s[1]:"";if(this.useGrouping&&!isEmpty(this.groupSeparator)){for(var n,l="",u=i.length;u>0;u-=this.groupSize)n=i.substring(i.length-this.groupSize),i=i.substring(0,i.length-this.groupSize),l=n+this.groupSeparator+l;i=l.substring(0,l.length-1)}if(r=i,0!=this.decimalDigits){if(this.decimalDigits>0)for(;a.length<this.decimalDigits;)a+="0";isEmpty(a)||(r+=this.decimalSeparator+a)}return t&&!this.currencyInside&&(r=this.negativeParenthesis?"("+r+")":"-"+r),this.useCurrency&&(r=this.currencySymbol+(this.spaceAfterCurrency?" ":"")+r),t&&this.currencyInside&&(r=this.negativeParenthesis?"("+r+")":"-"+r),r},this.round=function(e){if(this.decimalDigits<0)return e;if(0==this.decimalDigits)return Math.round(e);var t=Math.pow(10,this.decimalDigits);return Math.round(e*t)/t}}function DateParser(e,t,r){this.base=Parser,this.base(),this.mask=null==e?JST_DEFAULT_DATE_MASK:String(e),this.enforceLength=null==t?JST_DEFAULT_ENFORCE_LENGTH:booleanValue(t),this.completeFieldsWith=r||null,this.numberParser=new NumberParser(0),this.compiledMask=[];this.parse=function(e){if(isEmpty(e))return null;var t=-1!=(e=trim(String(e)).toUpperCase()).indexOf("PM");e=replaceAll(replaceAll(e,"AM",""),"PM","");for(var r=[0,0,0,0,0,0,0],s=["","","","","","",""],i=[null,null,null,null,null,null,null],a=0;a<this.compiledMask.length;a++){var n=this.compiledMask[a],l=this.getTypeIndex(n.type);if(-1==l)0==n.type&&(e=e.substr(n.length));else{var u=0;if(a==this.compiledMask.length-1)u=e,e="";else{var h=this.compiledMask[a+1];if(0==h.type){var _=e.indexOf(h.literal);-1==_?(u=e,e=""):(u=left(e,_),e=e.substr(_))}else u=e.substring(0,n.length),e=e.substr(n.length)}if(!onlyNumbers(u))return null;s[l]=u,i[l]=n,r[l]=isEmpty(u)?this.minValue(r,n.type):this.numberParser.parse(u)}}if(!isEmpty(e))return null;t&&r[JST_FIELD_HOUR]<12&&(r[JST_FIELD_HOUR]+=12),r[JST_FIELD_MONTH]>0&&r[JST_FIELD_MONTH]--,r[JST_FIELD_YEAR]<100&&(r[JST_FIELD_YEAR]<50?r[JST_FIELD_YEAR]+=2e3:r[JST_FIELD_YEAR]+=1900);for(a=0;a<r.length;a++){n=i[a];var c=r[a];u=s[a];if(c<0)return null;if(null!=n){if(this.enforceLength&&n.length>=0&&u.length<n.length)return null;if(c=parseInt(u,10),isNaN(c)&&null!=this.completeFieldsWith&&(c=r[a]=getDateField(this.completeFieldsWith,a)),c<this.minValue(r,n.type)||c>this.maxValue(r,n.type))return null}else a==JST_FIELD_DAY&&0==c&&(c=r[a]=1)}return new Date(r[JST_FIELD_YEAR],r[JST_FIELD_MONTH],r[JST_FIELD_DAY],r[JST_FIELD_HOUR],r[JST_FIELD_MINUTE],r[JST_FIELD_SECOND],r[JST_FIELD_MILLISECOND])},this.format=function(e){if(e instanceof Date||(e=this.parse(e)),null==e)return"";for(var t="",r=[e.getMilliseconds(),e.getSeconds(),e.getMinutes(),e.getHours(),e.getDate(),e.getMonth(),e.getFullYear()],s=0;s<this.compiledMask.length;s++){var i=this.compiledMask[s];switch(i.type){case 0:t+=i.literal;break;case 10:t+=r[JST_FIELD_HOUR]<12?"am":"pm";break;case 9:t+=r[JST_FIELD_HOUR]<12?"AM":"PM";break;case 1:case 2:case 3:case 5:case 6:t+=lpad(r[this.getTypeIndex(i.type)],i.length,"0");break;case 4:t+=lpad(r[JST_FIELD_HOUR]%12,i.length,"0");break;case 7:t+=lpad(r[JST_FIELD_MONTH]+1,i.length,"0");break;case 8:t+=lpad(right(r[JST_FIELD_YEAR],i.length),i.length,"0")}}return t},this.maxValue=function(e,t){switch(t){case 1:return 999;case 2:case 3:return 59;case 4:case 5:return 23;case 6:return getMaxDay(e[JST_FIELD_MONTH],e[JST_FIELD_YEAR]);case 7:return 12;case 8:return 9999;default:return 0}},this.minValue=function(e,t){switch(t){case 6:case 7:case 8:return 1;default:return 0}},this.getFieldType=function(e){switch(e.charAt(0)){case"S":return 1;case"s":return 2;case"m":return 3;case"h":return 4;case"H":return 5;case"d":return 6;case"M":return 7;case"y":return 8;case"a":return 10;case"A":return 9;default:return 0}},this.getTypeIndex=function(e){switch(e){case 1:return JST_FIELD_MILLISECOND;case 2:return JST_FIELD_SECOND;case 3:return JST_FIELD_MINUTE;case 4:case 5:return JST_FIELD_HOUR;case 6:return JST_FIELD_DAY;case 7:return JST_FIELD_MONTH;case 8:return JST_FIELD_YEAR;default:return-1}};var s=function(e,t,r){this.type=e,this.length=t||-1,this.literal=r};this.compile=function(){var e="",t="";this.compiledMask=[];for(var r=0;r<this.mask.length;r++)if(e=this.mask.charAt(r),""==t||e==t.charAt(0))t+=e;else{var i=this.getFieldType(t);this.compiledMask[this.compiledMask.length]=new s(i,t.length,t),t="",r--}if(""!=t){i=this.getFieldType(t);this.compiledMask[this.compiledMask.length]=new s(i,t.length,t)}},this.setMask=function(e){this.mask=e,this.compile()},this.setMask(this.mask)}function BooleanParser(e,t,r){this.base=Parser,this.base(),this.trueValue=e||JST_DEFAULT_TRUE_VALUE,this.falseValue=t||JST_DEFAULT_FALSE_VALUE,this.useBooleanValue=r||JST_DEFAULT_USE_BOOLEAN_VALUE,this.parse=function(e){return!(!this.useBooleanValue||!booleanValue(e))||e==JST_DEFAULT_TRUE_VALUE},this.format=function(e){return booleanValue(e)?this.trueValue:this.falseValue}}function StringParser(){this.base=Parser,this.base(),this.parse=function(e){return String(e)},this.format=function(e){return String(e)}}function MapParser(e,t){this.base=Parser,this.base(),this.map=isInstance(e,Map)?e:new Map,this.directParse=booleanValue(t),this.parse=function(e){if(t)return e;for(var r=this.map.getPairs(),s=0;s<r.length;s++)if(e==r[s].value)return r[s].key;return null},this.format=function(e){return this.map.get(e)}}function EscapeParser(e,t){this.base=Parser,this.base(),this.extraChars=e||"",this.onlyExtra=booleanValue(t),this.parse=function(r){return null==r?null:unescapeCharacters(String(r),e,t)},this.format=function(e){return null==e?null:escapeCharacters(String(e),t)}}function CustomParser(e,t){this.base=Parser,this.base(),this.formatFunction=e||function(e){return e},this.parseFunction=t||function(e){return e},this.parse=function(e){return t.apply(this,arguments)},this.format=function(t){return e.apply(this,arguments)}}function WrapperParser(e,t,r){this.base=Parser,this.base(),this.wrappedParser=e||new CustomParser,this.formatFunction=t||function(e){return e},this.parseFunction=r||function(e){return e},this.format=function(e){var r=this.wrappedParser.format.apply(this.wrappedParser,arguments),s=[];s[0]=r,s[1]=arguments[0];for(var i=1,a=arguments.length;i<a;i++)s[i+1]=arguments[i];return t.apply(this,s)},this.parse=function(e){var t=r.apply(this,arguments);return arguments[0]=t,this.wrappedParser.parse.apply(this.wrappedParser,arguments)}}