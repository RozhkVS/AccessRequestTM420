var icgControl=function(){var docCSSStyle;function icgControl(settings){var _this=this,_x=0,_y=0,_h=0,_w=0,_visible=!1,_initialization=!0,_font,_draggable,_observation;null==docCSSStyle&&(docCSSStyle=document.body.style);var options=_extend({},defaults,settings);this.id=options.id||"iControl"+icgControl.count,this.name=options.name||"Control"+icgControl.count++,this.control=options.control||"BaseControl",this.elm=this.event=_elmCreate(this,options),this.dispath=function(t){var e="on"+t.type;void 0!==_this[e]&&_this[e](t)},options.parent&&"self"!=options.parent&&(options.parent.AddChild(this),this.parent=options.parent,options.deferred||this.parent.elm.appendChild(this.elm)),this.css=this.elm.style,this.isDrag=!1,Object.defineProperty(this,"observation",{get:function(){return _observation},set:function(t){_observation=t,this.observer=iObserver,this.observer.make(this)}}),Object.defineProperty(this,"visible",{get:function(){return _visible},set:function(t){_visible=t,this.css.display=t?"inherit":"none"},configurable:!0}),_x=options.left,Object.defineProperty(this,"x",{get:function(){return _x},set:function(t){_x=parseInt(t.toString().replace(/px+$/,"")),this.elm.style.left=_x+"px"}}),_y=options.top,Object.defineProperty(this,"y",{get:function(){return _y},set:function(t){_y=parseInt(t.toString().replace(/px+$/,"")),this.css.top=_y+"px"}}),_h=options.height,Object.defineProperty(this,"h",{get:function(){return _h},set:function(t){_h=parseInt(t.toString().replace(/px+$/,"")),this.css.height=_h+"px"}}),_w=options.width,Object.defineProperty(this,"w",{get:function(){return _w},set:function(t){_w=parseInt(t.toString().replace(/px+$/,"")),this.css.width=_w+"px"}}),this.posXoff=0,this.posYoff=0,_font=new iFont({control:this}),this.font=_font,this.autoresize=!1,this.anchors={},this.anchors.top=!0,this.anchors.right=!1,this.anchors.bottom=!1,this.anchors.left=!0,this.constraints={},this.constraints.maxHeight=0,this.constraints.maxWidth=0,this.constraints.minHeight=0,this.constraints.minWidth=0,this.leftIndent=options.left,this.rightIndent=0,this.resizeble=!1,this.children=[],this.elm.obj=this,this.obj=this.id,eval(this.obj+"=this")}function onMouseMove(t){return!0}function onMouseLeave(t){return!0}icgControl.prototype={constructor:icgControl,get left(){return this.x},set left(t){this.x=parseInt(t.toString().replace(/px+$/,"")),this.css.left=this.x+"px",this.changePosition(),this.observation&&this.children.length&&this.publish({type:"ParentResize",observer:this})},get top(){return this.y},set top(t){this.y=parseInt(t.toString().replace(/px+$/,"")),this.css.top=this.y+"px",this.changePosition(),this.observation&&this.children.length&&this.publish({type:"ParentResize",observer:this})},get height(){return this.h},set height(t){this.h=parseInt(t.toString().replace(/px+$/,"")),this.css.height=this.h+"px",this.changeSize(),this.observation&&this.children.length&&this.publish({type:"ParentResize",observer:this})},get width(){return this.w},set width(t){this.w=parseInt(t.toString().replace(/px+$/,"")),this.css.width=this.w+"px",this.changeSize(),this.observation&&this.children.length&&this.publish({type:"ParentResize",observer:this})},get indentRight(){return this.rightIndent},set indentRight(t){this.rightIndent=t,this.parent&&"self"!==this.parent&&this instanceof icgControl&&this.anchors.right&&(this.w=this.parent.w-(this.x+this.horizontalBorderW()||0)-this.rightIndent)},get indentLeft(){return this.leftIndent},set indentLeft(t){this.leftIndent=t,this.parent&&"self"!==this.parent&&this instanceof icgControl&&this.anchors.right&&(this.w=this.parent.w-(this.x+this.horizontalBorderW()||0)-this.leftIndent)},set color(t){this.css.color=t},get color(){return this.elm?this.css.color:void 0},get owner(){return this.parent?this.parent:null},set owner(t){t&&t instanceof icgControl&&(this.parent=t,this.parent.AddChild(this))},get draggable(){return this.isDrag},set draggable(t){t?this.elm.classList.add("draggable"):this.elm.classList.remove("draggable"),this.isDrag=t},getStyleProp:function(t){var e=this.elm.style;if(e[t])return parseInt(e[t].toString().replace(/px+$/,""))},contentHeight:function(){return parseInt(this.css.lineHeight)},contentWidth:function(t){var e,i=document.createElement("canvas").getContext("2d");return i.font=this.font.toString(),e=i.measureText(t),Math.ceil(e.width)},AddChild:function(t){this.children[this.children.length]=t,this.observation&&this.addSubscriber(t.dispath)},setBgColor:function(t){this.css.backgroundColor=t},getBgColor:function(){return this.css.backgroundColor},setHTML:function(t){this.elm.innerHTML=t},setOverflow:function(t){this.css.overflow=t?"auto":"hidden"},moveTo:function(t,e){this.left=t,this.top=e},moveBy:function(t,e){this.moveTo(this.left+t,this.top+e)},resizeTo:function(t,e){this.width=t,this.height=e},resizeBy:function(t,e){this.resizeTo(this.width+t,this.height+e)},clientWidth:function(){var t=this.getStyleProp("paddingLeft")||0+this.getStyleProp("paddingRight")||0;return this.elm.getBoundingClientRect().width-(t+this.horizontalBorderW())},offsetLeft:function(){return this.getStyleProp("paddingLeft")+this.getStyleProp("borderLeft")},offsetRight:function(){return this.getStyleProp("paddingRight")+this.getStyleProp("borderRight")},horizontalBorderW:function(){return this.getStyleProp("borderLeft")+this.getStyleProp("borderRight")},show:function(){return this.css.visibility="visible",this.elm.classList.remove("visuallyhidden"),this},hide:function(){return this.css.visibility="hidden",this.elm.classList.add("visuallyhidden"),this}},icgControl.prototype.onFontChange=new Function,icgControl.prototype.changePosition=new Function,icgControl.prototype.changeSize=new Function,icgControl.prototype.onDispath=new Function,icgControl.prototype.leave=onMouseLeave,icgControl.prototype.move=onMouseMove;var _elmStyle=function(){var t,e,i=arguments[0],n="";for(t in i)void 0!==docCSSStyle[t]&&("number"==typeof(e=i[t])&&jsDomPxProp.split(";").indexOf(t)>=0&&(e+="px"),n+=styleHyphenFormat(t)+": "+e+";");return n},_elmCreate=function(){var t=arguments[0],e=arguments[1],i=document.createElement("div"),n=i.style;return i.id=t.id,i.setAttribute("control",e.control?e.control:t.control),n.cssText=_elmStyle(e),e.parent&&"self"!=e.parent?e.zIndex&&e.parent.css.zIndex<e.zIndex?n.zIndex=e.zIndex:(n.zIndex=e.parent.css?e.parent.css.zIndex:e.parent.style.zIndex,n.zIndex=n.zIndex+1):(n.zIndex=e.zIndex,document.body.appendChild(i)),i};icgControl.count=0;var defaults={position:"absolute",display:"inherit",backgroundColor:"#F0F0F0",left:0,top:0,height:1,width:1,color:"#000000",overflowX:"hidden",overflowY:"hidden",cursor:"default"};return icgControl}(),icgBorderManager=function(){var t=function(t){if(!t||!t.elm)return alert("Error. Parent object not defined!"),null;this.name=t.name+"iBorderManager",this.owner=t;var e=0,i="#7F7F7F",n="solid",o="transparent";this.owner.css.borderWidth=e,this.owner.css.borderColor=i,this.owner.css.borderStyle=n;var s={};Object.defineProperty(this,"style",{get:function(){return n},set:function(t){n=t,this.onChange({owner:this.owner,prop:"style",value:t})}}),Object.defineProperty(this,"color",{get:function(){return i},set:function(t){i=t,this.onChange({owner:this.owner,prop:"color",value:t})}}),Object.defineProperty(this,"size",{get:function(){return e},set:function(t){e=t,this.onChange({owner:this.owner,prop:"size",value:t})}}),Object.defineProperty(this,"top",{get:function(){return s.top},set:function(t){s.top=t,t?(this.owner.css.borderTopColor=i,this.owner.css.borderTopStyle=n,this.owner.css.borderTopWidth=e+"px"):(this.owner.css.borderTopColor=o,this.owner.css.borderTopStyle=n,this.owner.css.borderTopWidth="0px")}}),Object.defineProperty(this,"right",{get:function(){return s.right},set:function(t){s.right=t,t?(this.owner.css.borderRightColor=i,this.owner.css.borderRightStyle=n,this.owner.css.borderRightWidth=e+"px"):(this.owner.css.borderRightColor=o,this.owner.css.borderRightStyle=n,this.owner.css.borderRightWidth="0px")}}),Object.defineProperty(this,"bottom",{get:function(){return s.bottom},set:function(t){s.bottom=t,t?(this.owner.css.borderBottomColor=i,this.owner.css.borderBottomStyle=n,this.owner.css.borderBottomWidth=e+"px"):(this.owner.css.borderBottomColor=o,this.owner.css.borderBottomStyle=n,this.owner.css.borderBottomWidth="0px")}}),Object.defineProperty(this,"left",{get:function(){return s.left},set:function(t){s.left=t,t?(this.owner.css.borderLeftColor=i,this.owner.css.borderLeftStyle=n,this.owner.css.borderLeftWidth=e+"px"):(this.owner.css.borderLeftColor=o,this.owner.css.borderLeftStyle=n,this.owner.css.borderLeftWidth="0px")}}),this.Init()};return(t.prototype=Object.create(t.prototype)).constructor=t,t.prototype.Init=function(){this.top=!1,this.right=!1,this.bottom=!1,this.left=!1,this.size=0},t.prototype.onChange=function(t){"size"==t.prop&&(t.owner.css.borderLeftWidth=t.value+"px",t.owner.css.borderTopWidth=t.value+"px",t.owner.css.borderRightWidth=t.value+"px",t.owner.css.borderBottomWidth=t.value+"px"),"color"==t.prop&&(t.owner.css.borderColor=t.value),"style"==t.prop&&(t.owner.css.borderStyle=t.value)},t}(),icgLabel=function(){function t(n){var o,h,r,l,c=_extend({},s,n);c.id=c.id||"iLabel_"+t.count,c.control=c.control||"Label",icgControl.call(this,c),this.name="Label"+t.count++,o=c.caption,Object.defineProperty(this,"caption",{get:function(){return o},set:function(t){o=t,this.labelCaption.innerText=t,this.autosize=this.autosize}}),h=c.wrap,Object.defineProperty(this,"wrap",{get:function(){return h},set:function(t){h=t,this.setWrap(),this.autosize=this.autosize}}),r=c.autosize,Object.defineProperty(this,"autosize",{get:function(){return r},set:function(t){if(r=t,t){var e=this.getContentWidth();this.width=e;var i=this.getContentHeight();this.height=i}}}),c.align,Object.defineProperty(this,"align",{get:function(){return this._align},set:function(t){this._align=t,this.labelCaption.parentNode.align=t}}),c.valign,Object.defineProperty(this,"valign",{get:function(){return this._valign},set:function(t){this._valign=t,this.labelCaption.parentNode.style.verticalAlign="center"==t?"":t}}),this.selectable=!1,l=c.indent,Object.defineProperty(this,"indent",{get:function(){return l},set:function(t){l=t,this.labelCaption.style.paddingLeft=t+"px",this.autosize=this.autosize}}),this.Build(),this.onFontChange=e,this.resize=i,this.autosize=this.autosize,this.height<this.font.size&&(this.height=this.contentHeight()),this.css.cursor="default"}function e(){this.autosize=this.autosize,this.resize()}function i(){return this.width&&(this.labelBox.width=this.width),this.height&&(this.labelBox.height=this.height),this}t.prototype=Object.create(icgControl.prototype),t.prototype.constructor=t,t.prototype.Build=function(){var t=this.caption?this.caption:this.name,e="<div style='"+("padding-left:"+this.indent+"px;")+"'>"+t+"</div>",i=" style='background-color:inherit;vertical-align:"+this._valign+"'",n="<tr><td align='"+this._align+"' "+(this._wrap?"":"nowrap")+i+">"+e+"</td></tr>",o="<table width="+this.width+"px cellpadding=0 cellspacing=0 border=0>"+n+"</table>";return this.setHTML(o),this.labelBox=this.elm.querySelector("TABLE"),this.labelCaption=this.labelBox.querySelector("DIV"),this.labelCaption.setAttribute("id",this.name),this.event.onresize=new Function(this.obj+".resize(); return false;"),this},t.prototype.setWrap=function(){this.wrap?this.labelCaption.parentNode.removeAttribute("nowrap"):this.labelCaption.parentNode.setAttribute("nowrap","")},t.prototype.getContentHeight=function(){var t=this.contentHeight();return this.wrap?t*o(this.caption):t},t.prototype.getContentWidth=function(){return(this.wrap?this.contentWidth(n(this.caption)):this.contentWidth(this.caption))+this.indent};var n=function(t){var e,i=0;return t.split(" ").forEach((function(t,n){i<t.length&&(i=t.length,e=t)})),e},o=function(t){return t.split(" ").length},s={caption:"",indent:1,wrap:!1,align:"left",valign:"center",selectable:!1,autosize:!0,backgroundColor:"inherit"};return t.count=0,t}(),icgEdit=function(){function t(e){var c=_extend({},l,e);c.id="iEdit_"+t.count,c.control="Edit",icgControl.call(this,c),this.name="Edit"+t.count++,this.parser=void 0,this.timerId;var a=c.text,d=c.indent,u=!1;Object.defineProperty(this,"value",{get:function(){return a},set:function(t){this.parser?c.maxLength>0&&t.toString().length<=c.maxLength&&(a=t,this.editField.value!=t&&(this.editField.value=t),this.onChange(this)):(a=t,this.editField.value!=t&&(this.editField.value=t),t||(this.editField.value=""),this.onChange(this))}}),Object.defineProperty(this,"indent",{get:function(){return d},set:function(t){var e=this.editField.style;d=t,e.paddingLeft=t+"px",e.width=this.width-this.indent-3+"px"}}),Object.defineProperty(this,"readonly",{get:function(){return u},set:function(t){u=t,t?(this.editField.setAttribute("readonly",""),this.editField.style.backgroundColor="#F3F3F3",this.editField.style.borderBottom="2px solid #F3F3F3"):(this.editField.removeAttribute("readonly"),this.editField.style.backgroundColor="#FFFFFF",this.editField.style.borderBottom="2px solid #FFFFFF")}}),this.caption=c.caption||"",this.onFontChange=n,this.change=r,this.focus=o,this.blur=s,this.changePosition=h,this.resize=i,this.type=c.type,this.maxLength=c.maxLength,this.Build()}function e(t){t.srcElement.value.length||48!=t.keyCode||(t.srcElement.value="",t.preventDefault?t.preventDefault():t.returnValue=!1)}function i(){this.editField.style.width=this.width-this.indent-3+"px"}function n(){this.css.fontWeight&&(this.editField.style.fontWeight=this.css.fontWeight),this.css.fontStyle&&(this.editField.style.fontStyle=this.css.fontStyle),this.css.color&&(this.editField.style.color=this.css.color)}function o(){var t=this.editField.value,e=this.editField;this.css.border="1px solid #0078D7",timerId=setInterval((function(){e.value!=t&&(e.parentNode.obj.value=e.value,t=e.value)}),20)}function s(){clearInterval(this.timerId),this.css.border="1px solid #7F7F7F"}function h(){this.caption&&(this.label.left=this.left-2-this.label.width,this.label.top=this.top+2)}function r(){this.value!==this.editField.value&&(this.value=this.editField.value)}t.prototype=Object.create(icgControl.prototype),t.prototype.constructor=t,t.prototype.onChange=new Function,t.prototype.Build=function(){var t=this.value?this.value:"",e="position:absolute;top:0px;left:1px;height:15px;width:"+(this.width-this.indent-3)+"px;";e+="font-size:inherit; font-family:inherit; line-height:"+this.font.size+"px;";var i,n,o="<input class='simple' style='"+(e+="padding-left:"+this.indent+"px;")+"' value='"+t+"'>";this.setHTML(o),this.editField=this.elm.firstElementChild,this.editField.setAttribute("id",this.name),this.editField.style.backgroundColor="#FFFFFF",this.editField.style.borderTop="1px solid #FFFFFF",this.editField.style.borderRight="0px",this.editField.style.borderBottom="2px solid #FFFFFF",this.editField.style.borderLeft="0px",this.editField.setAttribute("autocomplete","off"),this.editField.setAttribute("autocorrect","off"),this.editField.setAttribute("autocapitalize","off"),this.editField.setAttribute("spellcheck","false"),this.editField.setAttribute("type","text"),this.css.border="1px solid #7F7F7F",this.editField.oninput=new Function(this.obj+".change(); return false;"),this.editField.onfocus=new Function(this.obj+".focus(); return false;"),this.editField.onblur=new Function(this.obj+".blur(); return false;"),this.event.onresize=new Function(this.obj+".resize(); return false;"),this.caption&&this.setCaption(this.caption),this.maxLength>0&&(i=this.name,n=this.maxLength,n=new SizeLimit(i,n)),"number"==this.type&&this.setNumberType(),this.css.cursor="text"},t.prototype.setCaption=function(t){return t?(this.label?this.label.caption=t:this.label=new icgLabel({id:this.name+"Caption",parent:this.parent,left:-1e3,top:0,width:1,caption:t,backgroudColor:"inherit",zIndex:this.css.zIndex}),this.label.left=this.left-2-this.label.width,this.label.top=this.top+2,this.label.autosize=!0,this):this},t.prototype.setNumberType=function(){this.parser=new NumberParser,this.parser.decimalDigits=0,new NumberMask(this.parser,this.name).keyDownFunction=e},t.prototype.onParentResize=function(t){this.anchors.right&&(this.width=t.observer.width-(this.left+this.horizontalBorderW())-this.indentRight,i.call(this))};var l={text:"",height:21,width:150,backgroundColor:"#FFFFFF",wrap:!1,indent:2,align:"left",selectable:!0,maxLength:-1,type:"text",autosize:!1};return t.count=0,t}(),icgMemo=function(){function t(e){var h=_extend({},s,e);h.id="iMemo_"+t.count,h.control="Memo",icgControl.call(this,h),this.name="Memo"+t.count++;var r=h.caption||void 0,l=h.limitBar||!1,c=h.text,a=h.maxLength,d=!1;Object.defineProperty(this,"maxlength",{get:function(){return a},set:function(t){a=t,this.limitbar=t>0}}),Object.defineProperty(this,"caption",{get:function(){return r},set:function(t){r=t,t?(this.title.caption=t,this.title.elm.classList.contains("visuallyhidden")&&(this.title.show(),this.TitlebarStateChange())):(this.title.caption="",this.TitlebarStateChange(),this.title.hide())}}),Object.defineProperty(this,"limitbar",{get:function(){return l},set:function(t){l=t,t?this.limitBar.elm.classList.contains("visuallyhidden")&&(this.limitBar.show(),this.TitlebarStateChange()):(this.TitlebarStateChange(),this.limitBar.hide())}}),Object.defineProperty(this,"value",{get:function(){return c},set:function(t){c=t,this.textField.innerText!=t&&(this.textField.innerText=t),this.onChange(this)}}),Object.defineProperty(this,"readonly",{get:function(){return d},set:function(t){d=t,t?(this.textField.setAttribute("readonly",""),this.textField.style.backgroundColor="#F3F3F3"):(this.textField.removeAttribute("readonly"),this.textField.style.backgroundColor="#FFFFFF")}}),this.Build(),this.Change=o,this.Focus=i,this.Blur=n,this.css.cursor="text"}function e(){this.css.fontWeight&&(this.textField.style.fontWeight=this.css.fontWeight),this.css.fontStyle&&(this.textField.style.fontStyle=this.css.fontStyle),this.css.color&&(this.textField.style.color=this.css.color)}function i(){this.box.css.borderColor="#0078D7"}function n(){this.box.css.borderColor="#7F7F7F"}function o(){this.value!==this.textField.value&&(this.value=this.textField.value)}t.prototype=Object.create(icgControl.prototype),t.prototype.onChange=new Function,t.prototype.constructor=t,t.prototype.Build=function(){var t=this.caption?getStrContentSize(this.caption).height+1:0,i=this.caption?t:0,n=this.height-t-2,o=this.width-2,s=this.value?this.value:"",h="position:absolute;top:0px;left:0px;height:"+(n-4)+"px; width:"+(o-4)+"px;";h+="overflow-x:hidden; overflow-y:auto; border: 1px solid #FFFFFF;";var r,l,c,a="<textarea style='"+(h+="font-size:inherit; font-family:inherit; line-height:"+this.font.size+"px;")+"'>"+s+"</textarea>";this.box=new icgControl({id:this.name+"Box",parent:this,left:0,top:i,height:n,width:o,bacgroundColor:"#FFFFFF"}),this.box.owner=this,this.box.css.border="1px solid #7F7F7F",this.box.setHTML(a),this.box.elm.firstChild.setAttribute("id",this.name),this.textField=this.box.elm.firstElementChild,this.textField.style.backgroundColor="#FFFFFF",this.textField.setAttribute("autocomplete","off"),this.textField.setAttribute("autocorrect","off"),this.textField.setAttribute("autocapitalize","off"),this.textField.setAttribute("spellcheck","false"),this.title=new icgLabel({id:this.name+"Caption",parent:this,left:0,top:0,height:t,width:this.width,backgroundColor:"inherit",caption:this.caption||""}),this.caption||this.title.hide(),this.limitBar=new icgLabel({parent:this,left:this.width-(getStrContentSize("9999/9999").width+1),top:0,height:t,width:getStrContentSize("9999/9999").width,autosize:!1,backgroundColor:"inherit"}),this.limitBar.caption="0/0",this.maxlength>0&&(this.limitBar.caption="0/"+this.maxlength,r=this.name,l=this.limitBar.name,c=this.maxlength,(c=new SizeLimit(r,c)).output=l,c.outputText="${size}/${max}"),this.limitBar.align="right",this.maxlength=this.maxlength,this.limitBar||this.limitBar.hide(),this.onFontChange=e,this.textField.oninput=new Function(this.obj+".Change(); return false;"),this.textField.onfocus=new Function(this.obj+".Focus(); return false;"),this.textField.onblur=new Function(this.obj+".Blur(); return false;"),this.box.elm.onresize=this.BoxResize},t.prototype.BoxResize=function(){this.obj.owner.textField.style.width=this.obj.width-4+"px",this.obj.owner.textField.style.height=this.obj.height-4+"px"},t.prototype.TitlebarStateChange=function(){var t=boxTop=getStrContentSize("A").height;isEmpty(this.caption)&&!this.limitbar&&(t=boxTop=0),this.box.top=boxTop,this.box.height=this.height-t-2},t.prototype.onParentResize=function(t){if(this.anchors.right){this.width=t.observer.width-this.left-this.indentRight;var e=this.caption?getStrContentSize(this.caption).height+1:0,i=this.caption?e:0,n=this.height-e-2,o=this.width-2;this.textField.style.width=this.width-4+"px",this.box.width=o,this.box.top=i,this.box.height=n,this.title.width=this.width,this.limitBar.left=this.obj.width-(getStrContentSize("9999/9999").width+1)}};var s={caption:"",text:"",wrap:!1,width:"140",height:"100",backgroundColor:"inherit",selectable:!0,maxLength:-1,autosize:!1};return t.count=0,t}(),icgCheckBox=function(){function t(e){var o=_extend({},n,e);o.id=o.id||"iCheckbox_"+t.count,o.control="Checkbox",icgControl.call(this,o),this.name="Checkbox"+t.count++,this.checked=o.checked;var s=this.checked;Object.defineProperty(this,"value",{get:function(){return s},set:function(t){s=t,t?(this.chkImage.firstElementChild.setAttribute("src",check_on),this.checked=t):(this.chkImage.firstElementChild.setAttribute("src",check_off),this.checked=t),this.onChange(this)}});var h=o.caption;Object.defineProperty(this,"caption",{get:function(){return h},set:function(t){h=t,this.chkText.innerText=t}}),this._align=o.align,Object.defineProperty(this,"align",{get:function(){return this._align},set:function(t){this._align=t,this.chkText.parentNode.align=t}}),this._valign=o.valign,Object.defineProperty(this,"valign",{get:function(){return this._valign},set:function(t){this._valign=t,this.chkText.parentNode.style.verticalAlign="center"==t?"":t}});var r=!1;Object.defineProperty(this,"readonly",{get:function(){return r},set:function(t){r=t}}),this.onclick=i,this.selectable=o.selectable,this.indent=o.indent,this.Init(),this.css.cursor="default"}function e(){this.autosize=this.autosize}function i(){this.readonly||(this.value=!this.value)}t.prototype=Object.create(icgControl.prototype),t.prototype.constructor=t,t.prototype.onChange=new Function,t.prototype.Init=function(){var t=this.caption?this.caption:this.name,i=this.checked?check_on:check_off,n="<img width='"+ICGL_CHK_WIDTH+"' height='"+ICGL_CHK_HEIGHT+"' id='"+this.id+"_imgchk' src='"+i+"' border='0'>",o="<a style='"+("text-decoration: none; cursor:default; color: #000000; padding-left:"+this.indent+"px;")+"' href='javascript:;'>"+t+"</a>",s="<a style='padding-left:1px;cursor:default;' href='javascript:;'>"+n+"</a>",h=" style='background-color:transparent'",r="<tr><td align='"+this._align+"' valign='"+this._valign+"' "+h+">"+s+"</td>";r+="<td align='"+this._align+"' nowrap valign='"+this._valign+"' "+h+">";var l="<table cellpadding=0 cellspacing=0 border=0>"+(r+=o+"</td></tr>")+"</table>";this.setHTML(l);var c=this.elm.querySelector("TABLE"),a=c.querySelectorAll("TD")[0],d=c.querySelectorAll("TD")[1];this.chkImage=a.querySelector("A"),this.chkImage.setAttribute("tabindex",-1),this.chkText=d.querySelector("A"),this.onFontChange=e,this.event.onclick=new Function(this.obj+".onclick(); return false;"),this.css.height="auto",this.css.width="auto"};var n={caption:"",indent:2,checked:!1,align:"left",valign:"top",selectable:!1,backgroundColor:"inherit",autosize:!1};return t.count=0,t}(),icgGroupBox=function(){function t(n){var o=_extend({},i,n);o.id="iGroupBox_"+t.count,o.name="GroupBox"+t.count++,o.control=o.name,icgControl.call(this,o);var s=o.caption;Object.defineProperty(this,"caption",{get:function(){return s},set:function(t){s=t,this.title.caption=t,t?this.title.show():this.title.hide(),this.setBoxSizing()}}),this.resize=e,this.observation=!0,this.Init(),this.font.setFont()}t.prototype=Object.create(icgControl.prototype),t.prototype.constructor=t,t.prototype.Init=function(){var t=this,e=this.caption?this.caption:"";this.box=new icgControl({id:this.name+"Box",control:this.name,parent:this,left:0,top:8,height:this.height-10,width:this.width-2,backgroundColor:"inherit"}),this.box.css.border="1px solid #DCDCDC",this.box.anchors.right=!0,this.box.onParentResize=function(){this.height=t.height-10,this.width=t.width-2},this.title=new icgLabel({id:this.name+"Caption",control:this.name,parent:this,left:5,top:0,width:1,backgroundColor:"inherit",caption:e}),this.title.autosize=!0,this.event.onresize=new Function(this.obj+".resize(); return false;"),this.css.cursor="default"},t.prototype.onParentResize=function(t){this.anchors.right&&(this.width=t.observer.width-this.left-this.indentRight)},t.prototype.setBoxSizing=function(){return this.box.top=Math.round(this.title.height/2),this.box.width=this.width-2,this.box.height=this.height-Math.round(this.title.height/2)-2,this},t.prototype.onFontChange=function(t){this.title&&this.title.font.toFont(t)};var e=function(){return this.setBoxSizing(),this.observation&&this.children.length&&this.publish({type:"ParentResize",observer:this}),!1},i={width:150,height:105,caption:""};return t.count=0,t}(),icgButtonImage=function(){function icgButtonImage(t){var e=_extend({},defaults,t);e.id="iButtonImage_"+icgButtonImage.count,e.control="ButtonImage",icgControl.call(this,e),this.name="ButtonImage"+icgButtonImage.count++,this.left=e.left,this.top=e.top,this.right=e.right,this.width=e.width,this.css.cursor="default"}function ButtonImageSetImages(t,e,i,n){return n||(n=""),this.preload(this.obj+".imgOff",t?n+t:""),this.preload(this.obj+".imgOn",e?n+e:""),this.preload(this.obj+".imgRoll",i?n+i:""),this}function ButtonImagePreload(imgObj,imgSrc){imgSrc?(eval(imgObj+" = new Image()"),eval(imgObj+".src = '"+imgSrc+"'"),eval(imgObj+"s = true")):eval(imgObj+"s = false")}function ButtonImageBuild(){return this.setHTML("<img class = 'dropdown_button' name='"+this.name+"Img'' src='"+this.imgOff.src+"' width="+this.width+" height="+this.height+">"),this}function ButtonImageActivate(){return this.elm.onclick=new Function(this.obj+".click(); return false;"),this.elm.onmousedown=new Function(this.obj+".down(); return false;"),this.elm.onmouseup=new Function(this.obj+".up(); return false;"),this.elm.onmouseover=new Function(this.obj+".over(); return false;"),this.elm.onmouseout=new Function(this.obj+".out(); return false;"),this}function ButtonImageClick(){this.onClick()}function ButtonImageDown(){this.selected?(this.selected=!1,this.imgOns&&this.change(this.imgOn),this.onDeselect()):(this.checkbox&&(this.selected=!0),this.imgOns&&this.change(this.imgOn),this.onSelect()),this.onDown()}function ButtonImageUp(){this.selected||(this.imgRolls?this.change(this.imgRoll):this.imgOns&&this.change(this.imgOff)),this.onUp()}function ButtonImageOver(){this.imgRolls&&!this.selected&&this.change(this.imgRoll),this.onOver()}function ButtonImageOut(){this.imgRolls&&!this.selected&&this.change(this.imgOff),this.onOut()}function ButtonImageChange(t){iDoc.images[this.name+"Img"].src=t.src}icgButtonImage.prototype=Object.create(icgControl.prototype),icgButtonImage.prototype.constructor=icgButtonImage,icgButtonImage.prototype.checkbox=!1,icgButtonImage.prototype.preload=ButtonImagePreload,icgButtonImage.prototype.setImages=ButtonImageSetImages,icgButtonImage.prototype.build=ButtonImageBuild,icgButtonImage.prototype.activate=ButtonImageActivate,icgButtonImage.prototype.click=ButtonImageClick,icgButtonImage.prototype.down=ButtonImageDown,icgButtonImage.prototype.up=ButtonImageUp,icgButtonImage.prototype.over=ButtonImageOver,icgButtonImage.prototype.out=ButtonImageOut,icgButtonImage.prototype.change=ButtonImageChange,icgButtonImage.prototype.onClick=new Function,icgButtonImage.prototype.onDown=new Function,icgButtonImage.prototype.onUp=new Function,icgButtonImage.prototype.onOver=new Function,icgButtonImage.prototype.onOut=new Function,icgButtonImage.prototype.onSelect=new Function,icgButtonImage.prototype.onDeselect=new Function,icgButtonImage.prototype.onParentResize=new Function;var defaults={left:0,top:0,width:15,height:15};return icgButtonImage.count=0,icgButtonImage}(),icgLookup=function(){function t(n){var c=_extend({},l,n);c.id="iLookup_"+t.count,c.control="Lookup",icgControl.call(this,c),this.name="Lookup"+t.count++,this.caption=c.caption||"",this.timerId;var d=c.text;Object.defineProperty(this,"value",{get:function(){return d},set:function(t){d=t,this.editField.value!=t&&(this.editField.value=t),t||(this.editField.value=""),this.onChange(this)}});var u,p=!0;Object.defineProperty(this,"lookup",{get:function(){return p},set:function(t){var e=t?a:0;p=t,e=this.readonly?0:e,this.editField.style.width=this.width-this.indent-3-e+"px",t?this.readonly||(this.selectBtn.show(),this.editField.setAttribute("readonly","")):(this.selectBtn.hide(),this.readonly||this.editField.removeAttribute("readonly"))}}),Object.defineProperty(this,"readonly",{get:function(){return u},set:function(t){u=t,t?(this.lookup&&(this.selectBtn.hide(),this.editField.style.width=this.width-this.indent-3+"px"),this.editField.setAttribute("readonly",""),this.editField.style.backgroundColor="#F3F3F3",this.editField.style.borderBottom="2px solid #F3F3F3"):(this.lookup?this.lookup=this.lookup:this.editField.removeAttribute("readonly"),this.editField.style.backgroundColor="#FFFFFF",this.editField.style.borderBottom="2px solid #FFFFFF")}}),this.indent=c.indent,this.resize=i,this.change=o,this.focus=s,this.blur=h,this.changePosition=e,this.click=r,this.Build(),this.css.cursor="default"}function e(){this.caption&&(this.label.left=this.left-2-this.label.width,this.label.top=this.top+2)}function i(){var t=this.lookup?a:0,e=this.width-a-2;t=this.readonly?0:t,this.selectBtn.left=e,this.editField.style.width=this.width-this.indent-4-t+"px"}function n(){this.css.fontWeight&&(this.editField.style.fontWeight=this.css.fontWeight),this.css.fontStyle&&(this.editField.style.fontStyle=this.css.fontStyle),this.css.color&&(this.editField.style.color=this.css.color)}function o(){this.value!==this.editField.value&&(this.value=this.editField.value)}function s(){var t=this.editField.value,e=this.editField;this.css.borderColor="#0078D7",timerId=setInterval((function(){e.value!=t&&(e.parentNode.obj.value=e.value,t=e.value)}),100)}function h(){clearInterval(this.timerId),this.css.borderColor="#7F7F7F"}function r(){this.onLookup()}t.prototype=Object.create(icgControl.prototype),t.prototype.constructor=t,t.prototype.onChange=new Function,t.prototype.onLookup=new Function,t.prototype.Build=function(){var t=this.value?this.value:"",e=this.width-a-2,i="position:absolute;top:0px;left:1px;height:15px;width:"+(this.width-this.indent-3-a)+"px;";i+="font-size:inherit; font-family:inherit; line-height:"+this.font.size+"px;";var o="<input class='simple' style='"+(i+="padding-left:"+this.indent+"px;")+"' value='"+t+"'>";return this.setHTML(o),this.editField=this.elm.firstElementChild,this.editField.style.backgroundColor="#FFFFFF",this.editField.style.borderTop="1px solid #FFFFFF",this.editField.style.borderRight="0px",this.editField.style.borderBottom="2px solid #FFFFFF",this.editField.style.borderLeft="0px",this.editField.setAttribute("autocomplete","off"),this.editField.setAttribute("autocorrect","off"),this.editField.setAttribute("autocapitalize","off"),this.editField.setAttribute("spellcheck","false"),this.editField.setAttribute("type","text"),this.editField.setAttribute("readonly",""),this.selectBtn=new icgButtonImage({id:this.name+"Button",parent:this,left:e,top:2,width:a,height:c}),this.selectBtn.setImages(lbtn_off,lbtn_on,lbtn_over).build().activate(),this.css.border="1px solid #7F7F7F",this.onFontChange=n,this.event.onresize=new Function(this.obj+".resize(); return false;"),this.selectBtn.onClick=new Function(this.obj+".click(); return false;"),this.editField.oninput=new Function(this.obj+".change(); return false;"),this.editField.onfocus=new Function(this.obj+".focus(); return false;"),this.editField.onblur=new Function(this.obj+".blur(); return false;"),this.caption&&this.setCaption(this.caption),this},t.prototype.setLookupSource=function(t){this.source=t},t.prototype.setCaption=function(t){if(!t)return this;this.label?this.label.caption=t:this.label=new icgLabel({id:this.name+"Caption",parent:this.parent,left:-1e3,top:0,width:1,caption:t}),this.label.autosize=!0,this.label.left=this.left-2-this.label.width,this.label.top=this.top+2};var l={text:"",indent:2,left:0,top:0,height:21,width:110,backgroundColor:"#FFFFFF"},c=17,a=17;return t.count=0,t}(),icgListBox=function(){function t(h){var r=_extend({},l,h);r.id=r.id||"iListBox"+t.count,r.name="ListBox"+t.count++,r.control="ListBox",icgControl.call(this,r);var c=r.caption,a=r.itemSpacing,d=r.indent,u=r.multiSelect,p=!!r.multiSelect,g=r.toolBar;this.itemH=0,this.selectedIndex=-1,this.selectedItems=[],this.items=new Array,Object.defineProperty(this,"allowDeselect",{get:function(){return p},set:function(t){p=t}}),Object.defineProperty(this,"caption",{get:function(){return c},set:function(t){c=t,t?(this.title.caption=t,this.title.elm.classList.contains("visuallyhidden")&&(this.title.show(),this.Redraw())):(this.title.caption="",this.Redraw(),this.title.hide())}}),Object.defineProperty(this,"itemSpacing",{get:function(){return a},set:function(t){a=t;var e,i=this.itemsCount;if(i>0){for(e=0;e<i;e++)this.items[e].css.borderBottom="1px solid #DDD";this.Redraw()}}}),Object.defineProperty(this,"multiSelect",{get:function(){return u}}),Object.defineProperty(this,"itemsCount",{get:function(){return this.items.length}}),Object.defineProperty(this,"indent",{get:function(){return d},set:function(t){d=t;var e,i=this.itemsCount;if(i>0){for(e=0;e<i;e++)this.items[e].indent=t;this.Redraw()}}}),Object.defineProperty(this,"toolBar",{get:function(){return g},set:function(t){g=t,t?this.toolbar.elm.classList.contains("visuallyhidden")&&(this.toolbar.show(),this.Redraw()):(this.Redraw(),this.toolbar.hide())}}),this.down=s,this.AddClick=new Function,this.DelClick=new Function,this.NewItem=e,this.focus=n,this.blur=o,this.resize=i,this.Buid(),this.indent=r.indent}function e(t){var e=t.index;this.items[e]=new h(t),this.items[e].owner=this,this.items[e].autosize=!0,0==this.itemsCount&&(this.itemH=this.items[e].height),this.items[e].elm.setAttribute("style","position:relative"),this.items[e].elm.removeAttribute("top"),this.items[e].elm.removeAttribute("left"),this.items[e].event.onmousedown=new Function(this.obj+".down('"+this.items[e].id+"'); return false;"),this.itemSpacing=this.itemSpacing,this.Redraw()}function i(){this.box.resizeTo(this.width-2,this.height-ifEmpty(this.title.height,0)-2),this.box.moveTo(0,ifEmpty(this.title.height,0)),this.toolbar&&(this.toolbar.left=this.width-30),this.Redraw()}function n(){this.box.css.borderColor="#0078D7"}function o(){this.box.css.borderColor="#7F7F7F"}function s(t){var e,i=-1,n=!!this.multiSelect&&this.multiSelect,o=this.selectedItems?this.selectedItems.length:0,s=this.index,h=null;for(e=0;e<this.itemsCount;e++)if(this.items[e].id==t){i=e;break}if(this.items[i].selected){if(this.allowDeselect)if(this.items[i].selected=!1,n){for(e=0;e<o;e++)if(this.selectedItems[e].index==s){h=e;break}h>=0&&(this.selectedItems.splice(h,1),this.selectedItems.length>=0&&(this.selectedIndex=this.selectedItems[this.selectedItems.length-1].index))}else this.selectedIndex=-1}else n?(this.items[i].selected=!0,this.selectedIndex=i,this.selectedItems.push(this)):(this.selectedIndex>=0&&this.selectedIndex!=i&&(this.items[this.selectedIndex].selected=!1),this.items[i].selected=!0,this.selectedIndex=i)}function h(t){try{if(!t.parent)throw new Error("Не указан объект контейнер!");if(!t.displayText)throw new Error("Не указан текст элемента списка!");if(void 0===t.index)throw new Error("Не указан индекс элемента списка!")}catch(t){return alert(t.message),null}var e={};e.parent=t.parent,e.id=e.id||"iListItem"+h.count,e.name="ListItem"+h.count++,e.control="ListItem",icgControl.call(this,e);var i=t.index,n=!0,o=0,s=!0,r="left",l="top",c=t.keyValue||t.index,a=t.displayText,f=!1;Object.defineProperty(this,"visible",{get:function(){return n},set:function(t){n=t,t?this.show():this.hide()}}),Object.defineProperty(this,"indent",{get:function(){return o},set:function(t){o=t,this.itemText.style.paddingLeft=t+"px",this.autosize=this.autosize}}),Object.defineProperty(this,"text",{get:function(){return a},set:function(t){a=t,this.itemText.innerText=t,this.autosize=this.autosize}}),Object.defineProperty(this,"key",{get:function(){return c}}),Object.defineProperty(this,"autosize",{get:function(){return s},set:function(t){if(s=t,t){var e=this.getContentWidth();this.width=e;var i=this.getContentHeight();this.height=i}}}),Object.defineProperty(this,"index",{get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"align",{get:function(){return r},set:function(t){r=t,this.itemText.parentNode.align=t}}),Object.defineProperty(this,"valign",{get:function(){return l},set:function(t){l=t,this.itemText.parentNode.style.verticalAlign="center"==t?"":t}}),Object.defineProperty(this,"selected",{get:function(){return f},set:function(t){f=t,t?(this.setBgColor(g),this.color=u):(this.setBgColor(p),this.color=d)}}),this.Build(),this.css.border="0px solid #7F7F7F",this.css.cursor="default",this.autosize=!0,this.width&&(this.itemBox.width=this.width)}function r(){this.obj.width&&(this.obj.itemBox.width=this.obj.width),this.obj.height&&(this.obj.itemBox.height=this.obj.height)}t.prototype=Object.create(icgControl.prototype),t.prototype.constructor=t,t.prototype.OnChange=new Function,t.prototype.Buid=function(){return this.box=new icgControl({id:this.name+"View",parent:this,left:0,top:0,height:this.height-1,width:this.width-2,overflowY:"auto",backgroundColor:"#FFFFFF"}),this.box.owner=this,this.box.css.border="1px solid #7F7F7F",this.box.css.overflowY="auto",this.title=new icgLabel({id:this.name+"Caption",parent:this,left:2,top:0,height:this.contentHeight(),width:this.width,caption:this.caption||""}),this.caption||this.title.hide(),this.toolbar=new icgControl({id:this.name+"Toolbar",parent:this,left:this.width-30,top:0,height:this.contentHeight(),width:30,backgroundColor:"#F0F0F0"}),this.addBtn=new icgButtonImage({id:this.name+"ButtonAdd",parent:this.toolbar,left:0,top:0,width:a,height:c}),this.addBtn.owner=this,this.addBtn.setImages(add_off,add_on,add_over).build().activate(),this.delBtn=new icgButtonImage({id:this.name+"ButtonDelete",parent:this.toolbar,left:15,top:0,width:a,height:c}),this.delBtn.owner=this,this.delBtn.setImages(delete_off,delete_on,delete_over).build().activate(),this.toolBar||this.toolbar.hide(),this.event.onresize=new Function(this.obj+".resize(); return false;"),this.event.onfocus=new Function(this.obj+".focus(); return false;"),this.event.onblur=new Function(this.obj+".blur(); return false;"),this.addBtn.onClick=new Function(this.obj+".AddClick(); return false;"),this.delBtn.onClick=new Function(this.obj+".DelClick(); return false;"),this.css.cursor="default",this.Redraw(),this},t.prototype.Redraw=function(){var t,e;if(t=this.caption||this.toolBar?this.contentHeight()+1:0,e=this.height-t-2,this.box.top=t,this.box.height=e,0!=this.itemsCount&&this.elm.clientWidth!=this.items[this.itemsCount-1].width)for(var i=0;i<this.items.length;i++)this.items[i].width=this.elm.clientWidth},t.prototype.Add=function(){if(!arguments[0])return!1;var t,e,i,n="string"==typeof arguments[0]?"string":"object",o=arguments.length;for(t=0;t<o;t++){try{if(typeof arguments[t]!==n)throw new Error("Тип аргумента не соответствует заявленному!")}catch(t){return alert(t.message),!1}e=this.itemsCount,(i={}).parent=this.box,i.index=e,"object"==n?(i.displayText=arguments[t].displayText,i.keyValue="keyValue"in arguments[t]?arguments[t].keyValue:t):(i.displayText=arguments[t],i.keyValue=t),this.NewItem(i),this.indent=this.indent,this.itemSpacing=this.itemSpacing}return this},t.prototype.Delete=function(t){var e=this.itemsCount;isNaN(t)||t>=0&&t<e&&(this.selectedIndex!=t||this.allowDeselect||(this.selectedIndex=-1),this.elm.firstChild.removeChild(this.items[t].elm),this.items.splice(t,1),this.Redraw())},t.prototype.Clear=function(){this.elm.innerHTML="",this.items=[],this.selectedIndex=-1,this.selectedItems=[]},t.prototype.onParentResize=function(t){this.anchors.right&&(this.w=t.observer.w-this.x-this.indentRight,this.box.resizeTo(this.width-2,this.height-ifEmpty(this.title.height,0)-2),this.box.moveTo(0,ifEmpty(this.title.height,0)),this.toolbar&&(this.toolbar.left=this.width-30),this.Redraw())},h.prototype=Object.create(icgControl.prototype),h.prototype.constructor=h,h.prototype.Build=function(){var t=this.text?this.text:this.name,e="<div class='item_text' style='"+("line-height:"+(this.font.size+3)+"px; background-color:transparent;color:inherit; padding-left:"+this.indent+"px;")+"'>"+t+"</div>",i=" style='background-color:inherit;color:inherit; vertical-align:"+this._valign+"'",n="<td align='"+this._align+"' nowrap"+i+">"+e+"</td>",o="<table width="+this.width+"px cellpadding=0 cellspacing=0 border=0><tbody><tr>"+n+"</tr></tbody></table>";return this.setHTML(o),this.elm.classList.add("list_item"),this.itemBox=this.elm.querySelector("TABLE"),this.itemText=this.itemBox.querySelector("DIV"),this.elm.onresize=r,this},h.prototype.getContentHeight=function(){return this.contentHeight()},h.prototype.getContentWidth=function(){return this.contentWidth(this.text)},h.count=0;var l={height:81,width:140,backgroundColor:"inherit",caption:void 0,itemSpacing:0,indent:0,multiSelect:!1,toolBar:!1},c=15,a=15,d="#000000",u="#FFFFFF",p="#FFFFFF",g="#0078D7";return t.count=0,t}(),icgListBoxEx=function(){function t(h){var r=_extend({},l,h);r.id=r.id||"iListBox"+t.count,r.name="ListBox"+t.count++,r.control="ListBox",icgControl.call(this,r);var c=r.caption,a=r.itemSpacing,d=r.indent,u=r.multiSelect,p=!!r.multiSelect,g=r.toolBar;this.title=r.title||"Наименование",this.itemH=0,this.selectedIndex=-1,this.selectedItems=[],this.items=new Array,Object.defineProperty(this,"allowDeselect",{get:function(){return p},set:function(t){p=t}}),Object.defineProperty(this,"caption",{get:function(){return c},set:function(t){c=t,t?(this.title.caption=t,this.title.elm.classList.contains("visuallyhidden")&&(this.title.show(),this.Redraw())):(this.title.caption="",this.Redraw(),this.title.hide())}}),Object.defineProperty(this,"itemSpacing",{get:function(){return a},set:function(t){a=t;var e,i=this.itemsCount;if(i>0){for(e=0;e<i;e++)this.items[e].css.borderBottom="1px solid #DDD";this.Redraw()}}}),Object.defineProperty(this,"multiSelect",{get:function(){return u}}),Object.defineProperty(this,"itemsCount",{get:function(){return this.items.length}}),Object.defineProperty(this,"indent",{get:function(){return d},set:function(t){d=t;var e,i=this.itemsCount;if(i>0){for(e=0;e<i;e++)this.items[e].indent=t;this.Redraw()}}}),Object.defineProperty(this,"toolBar",{get:function(){return g},set:function(t){g=t,t?this.toolbar.elm.classList.contains("visuallyhidden")&&(this.toolbar.show(),this.Redraw()):(this.Redraw(),this.toolbar.hide())}}),this.down=s,this.AddClick=new Function,this.DelClick=new Function,this.NewItem=e,this.focus=n,this.blur=o,this.resize=i,this.Buid(),this.indent=r.indent}function e(t){var e=t.index;this.items[e]=new h(t),this.items[e].owner=this,this.items[e].autosize=!0,0==this.itemsCount&&(this.itemH=this.items[e].height),this.items[e].elm.setAttribute("style","position:relative"),this.items[e].elm.removeAttribute("top"),this.items[e].elm.removeAttribute("left"),this.items[e].event.onmousedown=new Function(this.obj+".down('"+this.items[e].id+"'); return false;"),this.itemSpacing=this.itemSpacing,this.Redraw()}function i(){this.box.resizeTo(this.width-2,this.height-ifEmpty(this.title.height,0)-2),this.box.moveTo(0,ifEmpty(this.title.height,0)),this.toolbar&&(this.toolbar.left=this.width-30),this.Redraw()}function n(){this.box.css.borderColor="#0078D7"}function o(){this.box.css.borderColor="#7F7F7F"}function s(t){var e,i=-1,n=!!this.multiSelect&&this.multiSelect,o=this.selectedItems?this.selectedItems.length:0,s=this.index,h=null;for(e=0;e<this.itemsCount;e++)if(this.items[e].id==t){i=e;break}if(this.items[i].selected){if(this.allowDeselect)if(this.items[i].selected=!1,n){for(e=0;e<o;e++)if(this.selectedItems[e].index==s){h=e;break}h>=0&&(this.selectedItems.splice(h,1),this.selectedItems.length>=0&&(this.selectedIndex=this.selectedItems[this.selectedItems.length-1].index))}else this.selectedIndex=-1}else n?(this.items[i].selected=!0,this.selectedIndex=i,this.selectedItems.push(this)):(this.selectedIndex>=0&&this.selectedIndex!=i&&(this.items[this.selectedIndex].selected=!1),this.items[i].selected=!0,this.selectedIndex=i)}function h(t){try{if(!t.parent)throw new Error("Не указан объект контейнер!");if(!t.displayText)throw new Error("Не указан текст элемента списка!");if(void 0===t.index)throw new Error("Не указан индекс элемента списка!")}catch(t){return alert(t.message),null}var e={};e.parent=t.parent,e.id=e.id||"iListItem"+h.count,e.name="ListItem"+h.count++,e.control="ListItem",icgControl.call(this,e);var i=t.index,n=!0,o=0,s=!0,r="left",l="top",c=t.keyValue||t.index,a=t.displayText,f=!1;Object.defineProperty(this,"visible",{get:function(){return n},set:function(t){n=t,t?this.show():this.hide()}}),Object.defineProperty(this,"indent",{get:function(){return o},set:function(t){o=t,this.itemText.style.paddingLeft=t+"px",this.itemKey.style.paddingLeft=t+"px",this.autosize=this.autosize}}),Object.defineProperty(this,"text",{get:function(){return a},set:function(t){a=t,this.itemText.innerText=t,this.autosize=this.autosize}}),Object.defineProperty(this,"key",{get:function(){return c},set:function(t){c=t,this.itemKey.innerText=t,this.autosize=this.autosize}}),Object.defineProperty(this,"autosize",{get:function(){return s},set:function(t){if(s=t,t){var e=this.getContentWidth();this.width=e;var i=this.getContentHeight();this.height=i}}}),Object.defineProperty(this,"index",{get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"align",{get:function(){return r},set:function(t){r=t,this.itemText.parentNode.align=t,this.itemKey.parentNode.align=t}}),Object.defineProperty(this,"valign",{get:function(){return l},set:function(t){l=t,this.itemText.parentNode.style.verticalAlign="middle"==t?"":t,this.itemKey.parentNode.style.verticalAlign="middle"==t?"":t}}),Object.defineProperty(this,"selected",{get:function(){return f},set:function(t){f=t,t?(this.setBgColor(g),this.color=u):(this.setBgColor(p),this.color=d)}}),this.Build(),this.css.border="0px solid #7F7F7F",this.css.cursor="default",this.autosize=!0,this.width&&(this.itemBox.width=this.width)}function r(){this.obj.width&&(this.obj.itemBox.width=this.obj.width),this.obj.height&&(this.obj.itemBox.height=this.obj.height)}t.prototype=Object.create(icgControl.prototype),t.prototype.constructor=t,t.prototype.OnChange=new Function,t.prototype.Buid=function(){this.box=new icgControl({id:this.name+"View",parent:this,left:0,top:0,height:this.height-1,width:this.width-2,overflowY:"auto",backgroundColor:"#FFFFFF"}),this.box.owner=this,this.box.css.border="1px solid #7F7F7F",this.box.css.overflowY="auto",this.header=new icgControl({id:this.name+"Header",parent:this,left:0,top:0,height:this.contentHeight(),width:this.width-2,backgroundColor:"#F0F0F0"}),this.header.owner=this.box,this.header.css.border="1px solid #7F7F7F",this.header.css.overflow="hidden";var t="line-height:"+(this.font.size+3)+"px; background-color:transparent;color:inherit;padding-left:5px",e="<div class='item_text' style='"+t+"'>"+this.title+"</div>",i=" style='background-color:inherit;color:inherit; vertical-align:middle'",n="<td nowrap"+i+">"+e+"</td>",o="<td nowrap"+(i=" style='background-color:inherit;border-right:1px solid #DDDDDD;width:40px;color:inherit;vertical-align:middle'")+">"+(e="<div class='item_text' style='"+t+"'>№</div>")+"</td>",s="<table width="+this.header.width+"px cellpadding=0 cellspacing=0 border=0><tbody><tr>"+o+n+"</tr></tbody></table>";return this.header.setHTML(s),this.header.elm.classList.add("list_item"),this.title=new icgLabel({id:this.name+"Caption",parent:this,left:2,top:0,height:this.contentHeight(),width:this.width,caption:this.caption||""}),this.caption||this.title.hide(),this.toolbar=new icgControl({id:this.name+"Toolbar",parent:this,left:this.width-30,top:0,height:this.contentHeight(),width:30,backgroundColor:"#F0F0F0"}),this.addBtn=new icgButtonImage({id:this.name+"ButtonAdd",parent:this.toolbar,left:0,top:0,width:a,height:c}),this.addBtn.owner=this,this.addBtn.setImages(add_off,add_on,add_over).build().activate(),this.delBtn=new icgButtonImage({id:this.name+"ButtonDelete",parent:this.toolbar,left:15,top:0,width:a,height:c}),this.delBtn.owner=this,this.delBtn.setImages(delete_off,delete_on,delete_over).build().activate(),this.toolBar||this.toolbar.hide(),this.event.onresize=new Function(this.obj+".resize(); return false;"),this.event.onfocus=new Function(this.obj+".focus(); return false;"),this.event.onblur=new Function(this.obj+".blur(); return false;"),this.addBtn.onClick=new Function(this.obj+".AddClick(); return false;"),this.delBtn.onClick=new Function(this.obj+".DelClick(); return false;"),this.css.cursor="default",this.Redraw(),this},t.prototype.Redraw=function(){var t,e;if(t=this.caption||this.toolBar?this.contentHeight()+17:this.contentHeight()+1,e=this.height-t-2,this.box.top=t,this.box.height=e,this.header.width=this.width-2,this.header.elm.querySelector("TABLE").width=this.header.width,0!=this.itemsCount&&this.elm.clientWidth!=this.items[this.itemsCount-1].width)for(var i=0;i<this.items.length;i++)this.items[i].width=this.elm.clientWidth},t.prototype.Add=function(){if(!arguments[0])return!1;var t,e,i,n="string"==typeof arguments[0]?"string":"object",o=arguments.length;for(t=0;t<o;t++){try{if(typeof arguments[t]!==n)throw new Error("Тип аргумента не соответствует заявленному!")}catch(t){return alert(t.message),!1}e=this.itemsCount,(i={}).parent=this.box,i.index=e,"object"==n?(i.displayText=arguments[t].displayText,i.keyValue="keyValue"in arguments[t]?arguments[t].keyValue:t):(i.displayText=arguments[t],i.keyValue=t),this.NewItem(i),this.indent=this.indent,this.itemSpacing=this.itemSpacing}return this},t.prototype.Delete=function(t){var e=this.itemsCount;isNaN(t)||t>=0&&t<e&&(this.selectedIndex!=t||this.allowDeselect||(this.selectedIndex=-1),this.elm.firstChild.removeChild(this.items[t].elm),this.items.splice(t,1),this.Redraw())},t.prototype.Clear=function(){this.elm.innerHTML="",this.items=[],this.selectedIndex=-1,this.selectedItems=[]},t.prototype.onParentResize=function(t){this.anchors.right&&(this.w=t.observer.w-this.x-this.indentRight,this.box.resizeTo(this.width-2,this.height-ifEmpty(this.title.height,0)-2),this.box.moveTo(0,ifEmpty(this.title.height,0)),this.toolbar&&(this.toolbar.left=this.width-30),this.Redraw())},h.prototype=Object.create(icgControl.prototype),h.prototype.constructor=h,h.prototype.Build=function(){var t=this.text?this.text:this.name,e="line-height:"+(this.font.size+3)+"px; background-color:transparent;color:inherit; padding-left:"+this.indent+"px;",i="<div class='item_text' style='"+e+"'>"+t+"</div>",n=" style='background-color:inherit;color:inherit; vertical-align:"+this._valign+"'",o="<td align='"+this._align+"' nowrap"+n+">"+i+"</td>";i="<div class='item_text' style='"+e+"'>"+(this.key+1)+"</div>",n=" style='background-color:inherit;border-right:1px solid #DDDDDD;width:40px;;color:inherit; vertical-align:"+this._valign+"'";var s="<td align='"+this._align+"' nowrap"+n+">"+i+"</td>",h="<table width="+this.width+"px cellpadding=0 cellspacing=0 border=0><tbody><tr>"+s+o+"</tr></tbody></table>";return this.setHTML(h),this.elm.classList.add("list_item"),this.itemBox=this.elm.querySelector("TABLE"),this.itemKey=this.itemBox.querySelectorAll("DIV")[0],this.itemText=this.itemBox.querySelectorAll("DIV")[1],this.elm.onresize=r,this},h.prototype.getContentHeight=function(){return this.contentHeight()},h.prototype.getContentWidth=function(){return 47+this.contentWidth(this.text)},h.count=0;var l={height:81,width:140,backgroundColor:"inherit",caption:void 0,itemSpacing:0,indent:0,multiSelect:!1,toolBar:!1},c=15,a=15,d="#000000",u="#FFFFFF",p="#FFFFFF",g="#0078D7";return t.count=0,t}(),icgTabControl=function(){function t(i){var n=_extend({},r,i);n.id=n.id||"iTabControl"+t.count,n.control="TabControl",icgControl.call(this,n),this.name="TabControl"+t.count++,this.items=new Set,this.sheets=[];var o=-1;Object.defineProperty(this,"selectedItem",{get:function(){return o},set:function(t){o=t}}),Object.defineProperty(this,"itemsCount",{get:function(){return this.items.size()}}),this.Resize=e,this.Build(),this.css.cursor="default"}function e(){i(this)}function i(t){t.items.foreach((function(t){t.Sheet.height=t.parent.height-26,t.Sheet.width=t.parent.width-2,t.observation&&t.children.length&&t.publish({type:"ParentResize",observer:t})}))}function n(i){try{if(!i.parent)throw new InitError("Ошибка инициализации компонента: Не определен компонент контейнер!");if(!i.caption)throw new InitError("Ошибка инициализации компонента: Не задан текст заголовка закладки!");if(Object.getPrototypeOf(i.parent)!==t.prototype)throw new Error("В качестве объекта контейнера должен выступать компонент iTabControl!")}catch(t){alert("Error init component: "+t.message)}if(this.settings={},this.parent=this.settings.parent=i.parent,this.index=this.parent.itemsCount,this.caption=i.caption,this.settings.id="iTab"+n.count,this.settings.width=l+getStrContentSize(i.caption).width+c,0==this.parent.itemsCount)this.settings.top=0,this.settings.left=2,this.settings.height=23,this.settings.backgroundColor="#FFFFFF";else{var r=this.parent.getItem(this.index-1);this.settings.top=3,this.settings.left=r.left+r.width+2,this.settings.height=20,this.settings.backgroundColor="#F0F0F0"}icgControl.call(this,this.settings),this.active=null,Object.defineProperty(this,"selected",{get:function(){return this.active},set:function(t){t!==this.active&&(this.active=t,this.onStateChange())}});var a=!0;Object.defineProperty(this,"visible",{get:function(){return a},set:function(t){t!==a&&(a?(this.selected&&this.parent.itemsCount>1&&(0==this.index?(next=this.parent.getItem(this.index+1),next.Activate()):(r=this.parent.getItem(this.index-1)).Activate()),this.css.setProperty("display","none")):(this.css.removeProperty("display"),0==this.index&&this.Activate()),a=t,this.parent.Render())}}),this.settings.control="Tab",this.name="TabControl"+n.count++,this.Resize=e,this.onclick=o,this.over=s,this.out=h,this.build()}function o(){this.selected||this.Activate()}function s(){this.selected||(this.css.backgroundColor="#D8EAF9")}function h(){this.selected||(this.css.backgroundColor="#F0F0F0")}t.prototype=Object.create(icgControl.prototype),t.prototype.constructor=t,t.prototype.Build=function(){return this.event.onresize=new Function(this.obj+".Resize(); return false;"),this},t.prototype.getItem=function(t){var e=this.itemsCount,i=void 0;if(e>0)for(var n=this.items.toArray(),o=0;o<e;o++)if(o==t){i=n[o];break}return i},t.prototype.Add=function(t){try{if(0==arguments.length)throw new InitError("Ошибка инициализации компонента:  Отсутствуют входные параметры!")}catch(t){alert("Error init component: "+t.message)}for(var e=0,i=arguments.length;e<i;e++)this.items.add(new n({caption:arguments[e],parent:this,id:this.name+"Tab"}));return this},t.prototype.Render=function(){this.items.toArray().filter((function(t){return t.visible})).forEach((function(t,e,i){t.left=0==e?2:i[e-1].left+i[e-1].width+2,t.active?(t.top=0,t.height=23,t.backgroundColor="#FFFFFF"):(t.top=3,t.height=20,t.backgroundColor="#F0F0F0")}))},t.prototype.onParentResize=function(t){this.anchors.right&&(i(this),this.w=t.observer.w-this.x-this.indentRight)},n.prototype=Object.create(icgControl.prototype),n.prototype.constructor=n,n.prototype.build=function(){var t,e,i=this.css;0==this.index?(t=4,e=!0):(t=1,e=!1),i.borderTop="1px solid #D9D9D9",i.borderLeft="1px solid #D9D9D9",i.borderRight="1px solid #D9D9D9",i.borderBottom=e?"1px solid #D9D9D9":"0px solid #D9D9D9",i.borderRadius="0.25em 0.25em 0px 0px",0==this.index&&(i.borderBottomWidth="1px",i.borderBottomColor="#FFFFFF"),this.Label=new icgLabel({parent:this,top:t,indent:l,backgroundColor:"inherit",caption:this.caption}),this.Sheet=new icgControl({parent:this.parent,id:this.name+"TabSheet"+this.index,top:24,width:this.parent.width-2,height:this.parent.height-26,backgroundColor:"#F0F0F0"}),this.Sheet.anchors.right=!0,this.Sheet.indentRight=2,Object.defineProperty(this.Sheet,"visible",{get:function(){return this.parent.visible},set:function(t){this.parent.visible=t}}),this.Sheet.css.border="1px solid #D9D9D9",this.Sheet.css.zIndex=this.parent.css.zIndex,this.Sheet.onChange=new Function,this.parent.sheets[this.parent.sheets.length]=this.Sheet,this.Sheet.observation=!0,this.index>0?this.Deactivate():this.Activate(),this.event.onclick=new Function(this.obj+".onclick(); return false;"),this.event.onmouseover=new Function(this.obj+".over(); return false;"),this.event.onmouseout=new Function(this.obj+".out(); return false;")},n.prototype.onStateChange=function(){this.active&&this.index!=this.parent.selectedItem&&(this.parent.selectedItem>=0&&(prev=this.parent.getItem(this.parent.selectedItem),prev.Deactivate()),this.parent.selectedItem=this.index)},n.prototype.Activate=function(){this.Sheet.css.removeProperty("display"),this.top=0,this.height=23,this.Label.top=3,this.css.backgroundColor="#FFFFFF",this.css.borderBottom="1px solid #FFFFFF",this.selected=!0,this.Sheet.onChange()},n.prototype.Deactivate=function(){this.Sheet.css.setProperty("display","none"),this.top=3,this.height=20,this.Label.top=1,this.css.backgroundColor="#F0F0F0",this.css.borderBottom="0px solid #FFFFFF",this.selected=!1},n.count=0;var r={height:0,width:0,backgroundColor:"#F0F0F0"},l=6,c=5;return t.count=0,t}(),icgLayout=function(){function icgLayout(){var _left=default_properties.positioning.left,_top=default_properties.positioning.top,_width=default_properties.positioning.width,_height=default_properties.positioning.height,_right=void 0,_bottom=void 0;this.id="layout"+icgLayout.count,this.name="Layout"+icgLayout.count++,this.control="ILayout",this.panels=[],this.index=window.layouts?window.layouts.length:0,window.layouts[this.index]=this,arguments&&(this.parent=arguments[0],default_properties.parent=this.parent),this.elm=_elmCreate(this,default_properties),this.event=this.elm,this.css=this.elm.style,this.font=new iFont({control:this}),this.children=[],this.frame=self,this.resizeble=!0,this.obj=this.id,Object.defineProperty(this,"left",{get:function(){return _left},set:function(t){_left=parseInt(t.toString().replace(/px+$/,"")),this.elm.style.left=_left+"px"}}),Object.defineProperty(this,"top",{get:function(){return _top},set:function(t){_top=parseInt(t.toString().replace(/px+$/,"")),this.css.top=_top+"px"}}),Object.defineProperty(this,"height",{get:function(){return _height},set:function(t){_height=parseInt(t.toString().replace(/px+$/,"")),this.css.height=_height+"px"}}),Object.defineProperty(this,"width",{get:function(){return _width},set:function(t){_width=parseInt(t.toString().replace(/px+$/,"")),this.css.width=_width+"px"}}),Object.defineProperty(this,"right",{get:function(){return _right},set:function(t){var e=this.elm.getBoundingClientRect();_right=e.left+e.width,this.css.width=_right-e.left+"px"}}),Object.defineProperty(this,"bottom",{get:function(){return _bottom},set:function(t){var e=this.elm.getBoundingClientRect();_bottom=e.top+e.height,this.css.height=_bottom-e.top+"px"}}),eval(this.obj+"=this");var rightAnchorValue=function(t){_right=t},bottomAnchorValue=function(t){_bottom=t};this.rightFix=function(t){anchors.right()||anchors.right(!0,rightAnchorValue),anchors.set("right",t)},this.bottomFix=function(t){anchors.bottom()||anchors.bottom(!0,bottomAnchorValue),anchors.set("bottom",t)},this.preventSelection=new PreventSelection,this.render=new Function,this.event.onresize=new Function(this.obj+".resize(); return false;"),this.Rz=void 0}icgLayout.prototype={constructor:icgLayout,AddChild:function(t){this.children[this.children.length]=t},layoutInit:function(){this.preventSelection.On(this.elm),this.Rz=resizilla(this.redraw,10),arguments.length&&(parentWidth=0,parentHeight=0,"horizontal"==arguments[0]&&(this.panels[this.panels.length]=new icgControl({parent:this.parent?this.parent:"self",left:0,top:0,height:this.parent?this.parent.height:window.innerHeight,width:this.parent?Math.ceil(this.parent.width/2):Math.ceil(window.innerWidth/2),backgroundColor:"inherit"}),this.panels[this.panels.length]=new icgControl({parent:this.parent?this.parent:"self",left:this.parent?Math.ceil(this.parent.width/2):Math.ceil(window.innerWidth/2),top:0,height:this.parent?this.parent.height:window.innerHeight,width:this.parent?Math.ceil(this.parent.width-this.parent.width/2):Math.ceil(window.innerWidth-window.innerWidth/2),backgroundColor:"inherit"})),"vertical"==arguments[0]&&(this.panels[this.panels.length]=new icgControl({parent:this.parent?this.parent:"self",left:0,top:0,height:this.parent?Math.ceil(this.parent.height/2):Math.ceil(window.innerHeight/2),width:this.parent?this.parent.width:window.innerWidth,backgroundColor:"inherit"}),this.panels[this.panels.length]=new icgControl({parent:this.parent?this.parent:"self",left:0,top:this.parent?Math.ceil(this.parent.height/2):Math.ceil(window.innerHeight/2),height:this.parent?Math.ceil(this.parent.height-this.parent.height/2):Math.ceil(window.innerHeight-window.innerHeight/2),width:this.parent?this.parent.width:window.innerWidth,backgroundColor:"inherit"})))}},icgLayout.prototype.resize=function(){if(this.panels.length){var t=this.panels[0].width,e=this.panels[1].width,i=this.panels[0].height,n=this.panels[1].height,o=this.panels[0].children,s=this.panels[1].children;o.forEach((function(e){e.anchors.right&&t&&(Object.getPrototypeOf(e)==icgMemo.prototype||Object.getPrototypeOf(e)==icgListBox.prototype?e.width=t-e.left-6:e.width=t-e.left-8),e.anchors.bottom&&i&&(e.height=i-e.top-4)})),s.forEach((function(t){t.anchors.right&&e&&(Object.getPrototypeOf(t)==icgMemo.prototype||Object.getPrototypeOf(t)==icgListBox.prototype?t.width=e-t.left-6:t.width=e-t.left-8),t.anchors.bottom&&n&&(t.height=n-t.top-4)}))}},icgLayout.prototype.redraw=function(t){window.layouts.forEach((function(t){t.render()}))};var _elmStyle=function(){var t,e=arguments[0],i="";for(var n in e)if((t=jsDomProp.split(";").indexOf(n))>=0){var o=e[n];jsDomPxProp.split(";").indexOf(n)>=0&&(o+="px"),i+=htmlDomProp.split(";")[t]+":"+o+";"}return i},splitProp=function(t){var e={};for(var i in t.visualization)e[i]=t.visualization[i];for(i in t.positioning)e[i]=t.positioning[i];for(i in t.layout)e[i]=t.layout[i];return e},_elmCreate=function(){var t=arguments[0],e=arguments[1],i=document.createElement("div"),n=i.style;return i.id=t.id,n.cssText=_elmStyle(splitProp(e)),e.border&&(n.border=e.border+"px solid "+e.borderColor),e.parent&&"self"!=e.parent?(e.zIndex&&e.parent.css.zIndex<e.zIndex?n.zIndex=e.zIndex:n.zIndex=e.parent.css.zIndex+1,document.getElementById(e.parent.id).appendChild(i)):(n.zIndex=e.zIndex,document.body&&document.body.appendChild(i)),i.setAttribute("control",e.control?e.control:t.control),i},anchors=(left=!0,top=!0,right=!1,bottom=!1,methods={left:new Function,top:new Function,right:new Function,bottom:new Function},{left:function(){if(!arguments.length)return left;left="boolean"==typeof arguments[0]?arguments[0]:left,"boolean"==typeof arguments[0]&&((left=arguments[0])||(methods.left=void 0),arguments[1]&&(methods.left="function"==typeof arguments[1]?arguments[1]:methods.left))},top:function(){if(!arguments.length)return top;"boolean"==typeof arguments[0]&&((top=arguments[0])?arguments[1]&&(methods.top="function"==typeof arguments[1]?arguments[1]:methods.top):methods.top=void 0)},right:function(){if(!arguments.length)return right;"boolean"==typeof arguments[0]&&((right=arguments[0])?arguments[1]&&(methods.right="function"==typeof arguments[1]?arguments[1]:methods.right):methods.right=void 0)},bottom:function(){if(!arguments.length)return bottom;"boolean"==typeof arguments[0]&&((bottom=arguments[0])?arguments[1]&&(methods.bottom="function"==typeof arguments[1]?arguments[1]:methods.bottom):methods.bottom=void 0)},init:function(t){var e=isInstance(t,Array)?t:Array.prototype.slice.call(arguments).slice(0);if(e.length)for(var i=0;i<e.length;i++)methods[e[i].type]=e[i].f;else methods[e.type]=e.f},set:function(t,e){t&&methods[t].call(t,e)}}),left,top,right,bottom,methods,default_properties={visualization:{display:"inherit",backgroundColor:"#F0F0F0",color:"#000000"},positioning:{position:"absolute",left:0,top:0,height:window.innerHeight,width:window.innerWidth},font:{style:"normal",variant:"normal",weight:"normal",size:12,family:"Segoe UI",lineHeight:15},layout:{overflowX:"hidden",overflowY:"hidden",borderSize:0},options:{tooltip:""}};return icgLayout.count=0,icgLayout}(),PreventSelection=function(){function t(){return this.preventSelection=!1,this}return t.prototype={addHandler:function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener&&t.addEventListener(e,i,!1)},removeSelection:function(){if(window.getSelection)try{window.getSelection().removeAllRanges()}catch(t){return}else document.selection&&document.selection.clear&&document.selection.clear()},killCtrlA:function(t){if(!((t=t||window.event).target||t.srcElement).tagName.match(/INPUT|TEXTAREA/i)){var e=t.keyCode||t.which;t.ctrlKey&&e=="A".charCodeAt(0)&&(this.removeSelection(),t.preventDefault?t.preventDefault():t.returnValue=!1)}},On:function(t){var e=this;this.addHandler(t,"mousemove",(function(){e.preventSelection&&e.removeSelection()})),this.addHandler(t,"mousedown",(function(t){var i=(t=t||window.event).target||t.srcElement;e.preventSelection=!i.tagName.match(/INPUT|TEXTAREA/i)})),this.addHandler(t,"mouseup",(function(){e.preventSelection&&e.removeSelection(),e.preventSelection=!1})),this.addHandler(t,"keydown",this.killCtrlA),this.addHandler(t,"keyup",this.killCtrlA)}},t}();iEvents.addHandler(document,"click",(function(t){var e=t.target,i=t.target.localName,n=document.querySelectorAll("div[control='DropdownBox'][active]"),o=n[0];if(!o)return!1;if("img"==i&&(owner=e.closest("div[control='ComboBox']"),owner&&o.obj.owner.name==owner.obj.name)){if(!(n.length>1))return!1;o=n[1]}return("div"!=i||(owner=e.closest("div[control='DropdownBox'][active]"),!owner))&&(o.obj.owner.DropedDown(),!0)}));